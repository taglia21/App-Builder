{% extends "base.html" %}

{% block title %}Create New Project - LaunchForge{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <!-- Header -->
    <div style="margin-bottom: 32px;">
        <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 8px;">Create Your App</h1>
        <p style="color: #9ca3af;">Describe your idea and let AI build it for you</p>
    </div>

    <!-- Progress Steps -->
    <div style="display: flex; justify-content: center; gap: 40px; margin-bottom: 48px;">
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="step1-indicator" style="width: 40px; height: 40px; border-radius: 50%; background: #8b5cf6; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</div>
            <span style="margin-top: 8px; font-size: 14px;">Describe Idea</span>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="step2-indicator" style="width: 40px; height: 40px; border-radius: 50%; background: #374151; color: #9ca3af; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</div>
            <span style="margin-top: 8px; font-size: 14px; color: #9ca3af;">Generate Code</span>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="step3-indicator" style="width: 40px; height: 40px; border-radius: 50%; background: #374151; color: #9ca3af; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</div>
            <span style="margin-top: 8px; font-size: 14px; color: #9ca3af;">Customize</span>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="step4-indicator" style="width: 40px; height: 40px; border-radius: 50%; background: #374151; color: #9ca3af; display: flex; align-items: center; justify-content: center; font-weight: bold;">4</div>
            <span style="margin-top: 8px; font-size: 14px; color: #9ca3af;">Deploy</span>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="step5-indicator" style="width: 40px; height: 40px; border-radius: 50%; background: #374151; color: #9ca3af; display: flex; align-items: center; justify-content: center; font-weight: bold;">5</div>
            <span style="margin-top: 8px; font-size: 14px; color: #9ca3af;">Launch Business</span>
        </div>
    </div>

    <!-- Step 1: Idea Input -->
    <div id="step1" class="step-content" style="background: #1f2937; border-radius: 16px; padding: 32px; border: 1px solid #374151;">
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 24px;">üí° What's your app idea?</h2>
        
        <div style="margin-bottom: 24px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Project Name</label>
            <input type="text" id="project-name" placeholder="My Awesome App" 
                   style="width: 100%; padding: 12px 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: white; font-size: 16px;">
        </div>

        <div style="margin-bottom: 24px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Describe your app idea in detail</label>
            <textarea id="idea-description" rows="6" placeholder="Example: I want to build a task management app where teams can create projects, assign tasks to members, set due dates, and track progress with kanban boards. It should have user authentication, real-time updates, and email notifications."
                      style="width: 100%; padding: 12px 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: white; font-size: 16px; resize: vertical;"></textarea>
            <p style="font-size: 12px; color: #6b7280; margin-top: 8px;">Be as specific as possible - mention features, user types, integrations you need</p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 500;">App Type</label>
                <select id="app-type" style="width: 100%; padding: 12px 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: white; font-size: 16px;">
                    <option value="saas">SaaS Application</option>
                    <option value="marketplace">Marketplace</option>
                    <option value="ecommerce">E-commerce Store</option>
                    <option value="dashboard">Analytics Dashboard</option>
                    <option value="social">Social Platform</option>
                    <option value="portfolio">Portfolio/Landing Page</option>
                    <option value="api">API Service</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: 500;">Tech Stack</label>
                <select id="tech-stack" style="width: 100%; padding: 12px 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: white; font-size: 16px;">
                    <option value="python-fastapi">Python + FastAPI (Recommended)</option>
                    <option value="nextjs">Next.js + React</option>
                    <option value="django">Python + Django</option>
                    <option value="flask">Python + Flask</option>
                    <option value="express">Node.js + Express</option>
                </select>
            </div>
        </div>

        <div style="margin-bottom: 24px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Key Features (select all that apply)</label>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-auth" checked style="width: 18px; height: 18px;"> User Authentication
                </label>
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-payments" style="width: 18px; height: 18px;"> Payments (Stripe)
                </label>
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-database" checked style="width: 18px; height: 18px;"> Database
                </label>
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-api" style="width: 18px; height: 18px;"> REST API
                </label>
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-email" style="width: 18px; height: 18px;"> Email Notifications
                </label>
                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: #111827; border: 1px solid #374151; border-radius: 8px; cursor: pointer;">
                    <input type="checkbox" id="feat-realtime" style="width: 18px; height: 18px;"> Real-time Updates
                </label>
            </div>
        </div>

        <button id="generate-btn" onclick="generateCode()" 
                style="width: 100%; padding: 16px; background: linear-gradient(135deg, #8b5cf6, #6366f1); border: none; border-radius: 12px; color: white; font-size: 18px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
            <i data-lucide="sparkles" style="width: 20px; height: 20px;"></i>
            Generate My App with AI
        </button>
    </div>

    <!-- Step 2: Generation Progress (hidden by default) -->
    <div id="step2" class="step-content" style="display: none; background: #1f2937; border-radius: 16px; padding: 32px; border: 1px solid #374151;">
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 24px;">‚öôÔ∏è Generating Your App...</h2>
        
        <div id="generation-progress" style="margin-bottom: 24px;">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                <div class="spinner" style="width: 24px; height: 24px; border: 3px solid #374151; border-top-color: #8b5cf6; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <span id="progress-text">Analyzing your idea...</span>
            </div>
            <div style="background: #374151; border-radius: 8px; height: 8px; overflow: hidden;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #8b5cf6, #6366f1); transition: width 0.5s;"></div>
            </div>
        </div>

        <div id="generation-log" style="background: #111827; border-radius: 8px; padding: 16px; font-family: monospace; font-size: 13px; max-height: 300px; overflow-y: auto;">
            <div style="color: #10b981;">> Initializing AI code generator...</div>
        </div>
    </div>

    <!-- Step 3: Customize (hidden by default) -->
    <div id="step3" class="step-content" style="display: none; background: #1f2937; border-radius: 16px; padding: 32px; border: 1px solid #374151;">
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 24px;">üé® Customize Your App</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
            <!-- Code Preview -->
            <div>
                <h3 style="font-size: 1rem; font-weight: 500; margin-bottom: 12px;">Generated Files</h3>
                <div id="file-tree" style="background: #111827; border-radius: 8px; padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-radius: 4px;" onclick="selectFile('main.py')">
                        <i data-lucide="file-code" style="width: 16px; height: 16px; color: #8b5cf6;"></i>
                        <span>main.py</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-radius: 4px;" onclick="selectFile('models.py')">
                        <i data-lucide="file-code" style="width: 16px; height: 16px; color: #8b5cf6;"></i>
                        <span>models.py</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-radius: 4px;" onclick="selectFile('routes.py')">
                        <i data-lucide="file-code" style="width: 16px; height: 16px; color: #8b5cf6;"></i>
                        <span>routes.py</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-radius: 4px;" onclick="selectFile('templates/')">
                        <i data-lucide="folder" style="width: 16px; height: 16px; color: #fbbf24;"></i>
                        <span>templates/</span>
                    </div>
                </div>
            </div>
            
            <!-- Live Preview -->
            <div>
                <h3 style="font-size: 1rem; font-weight: 500; margin-bottom: 12px;">Live Preview</h3>
                <div id="preview-frame" style="background: #111827; border-radius: 8px; height: 300px; display: flex; align-items: center; justify-content: center; border: 1px solid #374151;">
                    <p style="color: #6b7280;">Preview will appear here</p>
                </div>
            </div>
        </div>

        <div style="margin-top: 24px;">
            <h3 style="font-size: 1rem; font-weight: 500; margin-bottom: 12px;">Make Changes</h3>
            <textarea id="code-editor" rows="10" style="width: 100%; padding: 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: #e5e7eb; font-family: monospace; font-size: 13px;"></textarea>
        </div>

        <div style="display: flex; gap: 16px; margin-top: 24px;">
            <button onclick="regenerateSection()" style="flex: 1; padding: 12px; background: #374151; border: none; border-radius: 8px; color: white; cursor: pointer;">
                <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i> Regenerate Section
            </button>
            <button onclick="goToStep(4)" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #8b5cf6, #6366f1); border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer;">
                Deploy My App <i data-lucide="rocket" style="width: 16px; height: 16px;"></i>
            </button>
        </div>
    </div>

    <!-- Step 4: Deploy (hidden by default) -->
    <div id="step4" class="step-content" style="display: none; background: #1f2937; border-radius: 16px; padding: 32px; border: 1px solid #374151;">
        <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 24px;">üöÄ Deploy Your App</h2>
        
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 24px;">
            <div style="padding: 24px; background: #111827; border: 2px solid #8b5cf6; border-radius: 12px; cursor: pointer;" onclick="selectPlatform('railway')">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <img src="https://railway.app/brand/logo-light.svg" alt="Railway" style="height: 32px;">
                    <span style="font-weight: 600; font-size: 1.1rem;">Railway</span>
                    <span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Recommended</span>
                </div>
                <p style="color: #9ca3af; font-size: 14px;">One-click deploy with automatic SSL, domains, and scaling</p>
            </div>
            <div style="padding: 24px; background: #111827; border: 1px solid #374151; border-radius: 12px; cursor: pointer;" onclick="selectPlatform('vercel')">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <svg height="32" viewBox="0 0 76 65" fill="white"><path d="M37.5274 0L75.0548 65H0L37.5274 0Z"/></svg>
                    <span style="font-weight: 600; font-size: 1.1rem;">Vercel</span>
                </div>
                <p style="color: #9ca3af; font-size: 14px;">Great for frontend apps and serverless functions</p>
            </div>
        </div>

        <div style="margin-bottom: 24px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Custom Domain (optional)</label>
            <div style="display: flex; gap: 8px;">
                <input type="text" id="custom-domain" placeholder="myapp.com" 
                       style="flex: 1; padding: 12px 16px; background: #111827; border: 1px solid #374151; border-radius: 8px; color: white;">
                <button onclick="checkDomain()" style="padding: 12px 24px; background: #374151; border: none; border-radius: 8px; color: white; cursor: pointer;">Check Availability</button>
            </div>
            <p id="domain-status" style="font-size: 12px; color: #6b7280; margin-top: 8px;"></p>
        </div>

        <div id="deploy-status" style="display: none; background: #111827; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div class="spinner" style="width: 20px; height: 20px; border: 2px solid #374151; border-top-color: #8b5cf6; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <span id="deploy-text">Deploying to Railway...</span>
            </div>
        </div>

        <button id="deploy-btn" onclick="deployApp()" 
                style="width: 100%; padding: 16px; background: linear-gradient(135deg, #10b981, #059669); border: none; border-radius: 12px; color: white; font-size: 18px; font-weight: 600; cursor: pointer;">
            üöÄ Deploy Now
        </button>
    </div>

    <!-- Step 5: Launch Business (hidden by default) -->
    <div id="step5" class="step-content" style="display: none; background: #1f2937; border-radius: 16px; padding: 32px; border: 1px solid #374151;">
        <div style="text-align: center; margin-bottom: 32px;">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
                <i data-lucide="check" style="width: 40px; height: 40px; color: white;"></i>
            </div>
            <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 8px;">üéâ Your App is Live!</h2>
            <p id="live-url" style="color: #8b5cf6; font-size: 1.1rem;">https://your-app.railway.app</p>
        </div>

        <div style="background: #111827; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
            <h3 style="font-weight: 600; margin-bottom: 16px;">Ready to launch your business?</h3>
            <p style="color: #9ca3af; margin-bottom: 16px;">Turn your app into a real business with LLC formation, EIN, and custom domain.</p>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                <div style="text-align: center; padding: 16px;">
                    <i data-lucide="building" style="width: 32px; height: 32px; color: #8b5cf6; margin-bottom: 8px;"></i>
                    <p style="font-weight: 500;">LLC Formation</p>
                    <p style="font-size: 12px; color: #6b7280;">Delaware LLC in 24h</p>
                </div>
                <div style="text-align: center; padding: 16px;">
                    <i data-lucide="globe" style="width: 32px; height: 32px; color: #8b5cf6; margin-bottom: 8px;"></i>
                    <p style="font-weight: 500;">Custom Domain</p>
                    <p style="font-size: 12px; color: #6b7280;">yourcompany.com</p>
                </div>
                <div style="text-align: center; padding: 16px;">
                    <i data-lucide="file-text" style="width: 32px; height: 32px; color: #8b5cf6; margin-bottom: 8px;"></i>
                    <p style="font-weight: 500;">EIN Number</p>
                    <p style="font-size: 12px; color: #6b7280;">Tax ID for your business</p>
                </div>
            </div>
        </div>

        <div style="display: flex; gap: 16px;">
            <a href="/projects" style="flex: 1; padding: 12px; background: #374151; border: none; border-radius: 8px; color: white; text-decoration: none; text-align: center;">
                Go to Dashboard
            </a>
            <a id="view-project-btn" href="/projects" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #8b5cf6, #6366f1); border: none; border-radius: 8px; color: white; font-weight: 600; text-decoration: none; text-align: center;">
                View My Project ‚Üí
            </a>
        </div>
    </div>
</div>

<style>
@keyframes spin {
    to { transform: rotate(360deg); }
}
.step-content {
    transition: all 0.3s ease;
}
</style>

<script>
let currentStep = 1;
let projectData = {};
var PROJECTS_STORAGE_KEY = 'launchforge_projects';

function loadProjects() {
    var raw = localStorage.getItem(PROJECTS_STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
}
function saveProject(proj) {
    var projects = loadProjects();
    projects.unshift(proj);
    localStorage.setItem(PROJECTS_STORAGE_KEY, JSON.stringify(projects));
}

function goToStep(step) {
    for (let i = 1; i <= 5; i++) {
        document.getElementById('step' + i).style.display = 'none';
        const indicator = document.getElementById('step' + i + '-indicator');
        if (indicator) {
            indicator.style.background = i < step ? '#10b981' : (i === step ? '#8b5cf6' : '#374151');
            indicator.style.color = i <= step ? 'white' : '#9ca3af';
        }
    }
    document.getElementById('step' + step).style.display = 'block';
    currentStep = step;
}

async function generateCode() {
    const name = document.getElementById('project-name').value || 'My App';
    const idea = document.getElementById('idea-description').value;
    const appType = document.getElementById('app-type').value;
    const techStack = document.getElementById('tech-stack').value;
    
    if (!idea.trim()) {
        alert('Please describe your app idea');
        return;
    }
    
    // Gather selected features
    var features = [];
    if (document.getElementById('feat-auth').checked) features.push('User Authentication');
    if (document.getElementById('feat-payments').checked) features.push('Payments (Stripe)');
    if (document.getElementById('feat-database').checked) features.push('Database');
    if (document.getElementById('feat-api').checked) features.push('REST API');
    if (document.getElementById('feat-email').checked) features.push('Email Notifications');
    if (document.getElementById('feat-realtime').checked) features.push('Real-time Updates');

    projectData = { name: name, idea: idea, appType: appType, techStack: techStack, features: features };
    
    goToStep(2);
    
    // Detailed generation steps with realistic timings
    const steps = [
        { text: 'Analyzing requirements...', progress: 5, color: '#a78bfa', detail: 'Parsing project description and extracting entities' },
        { text: 'Identifying data models...', progress: 12, color: '#a78bfa', detail: 'Found: User, Session, ' + appType + 'Model' },
        { text: 'Designing database schema...', progress: 22, color: '#818cf8', detail: 'Creating PostgreSQL migrations with Alembic' },
        { text: 'Generating API routes...', progress: 35, color: '#818cf8', detail: '12 endpoints across 4 routers' },
        { text: 'Creating models and services...', progress: 48, color: '#6366f1', detail: 'Building service layer with business logic' },
        { text: 'Building UI templates...', progress: 60, color: '#6366f1', detail: 'Generating 8 pages with responsive layouts' },
        { text: 'Setting up authentication...', progress: 72, color: '#8b5cf6', detail: 'JWT tokens + session management' },
        { text: 'Configuring deployment files...', progress: 82, color: '#8b5cf6', detail: 'Dockerfile, docker-compose.yml, railway.toml' },
        { text: 'Running code quality checks...', progress: 90, color: '#7c3aed', detail: 'Linting, type checking ‚Äî 0 errors' },
        { text: 'Packaging project...', progress: 96, color: '#7c3aed', detail: 'Creating requirements.txt and README.md' },
        { text: '‚úì Generation complete!', progress: 100, color: '#22c55e', detail: '34 files generated in 6.2 seconds' }
    ];
    
    const log = document.getElementById('generation-log');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    
    for (const step of steps) {
        progressText.textContent = step.text;
        progressBar.style.width = step.progress + '%';
        var logLine = '<div style="display:flex; justify-content:space-between;"><span style="color:' + step.color + ';">> ' + step.text + '</span><span style="color:#4b5563; font-size:0.75rem;">' + step.progress + '%</span></div>';
        if (step.detail) {
            logLine += '<div style="color:#6b7280; padding-left:16px; font-size:0.75rem; margin-bottom:4px;">  ' + step.detail + '</div>';
        }
        log.innerHTML += logLine;
        log.scrollTop = log.scrollHeight;
        var delay = step.progress < 50 ? 600 : (step.progress < 90 ? 500 : 400);
        await new Promise(r => setTimeout(r, delay));
    }

    // Save the project to localStorage
    var projectId = 'proj_' + Date.now();
    var slug = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
    var newProject = {
        id: projectId,
        name: name,
        description: idea,
        appType: appType,
        techStack: techStack,
        features: features,
        status: 'ready',
        created_at: new Date().toISOString(),
        url: 'https://' + slug + '.up.railway.app'
    };
    saveProject(newProject);
    projectData.id = projectId;
    projectData.slug = slug;

    await new Promise(r => setTimeout(r, 600));
    goToStep(3);
}

function selectFile(filename) {
    // Load file content into editor (simulated)
    const editor = document.getElementById('code-editor');
    editor.value = '# ' + filename + ' - Generated by LaunchForge AI\n\n# Your code here...';
}

function regenerateSection() {
    alert('Regenerating selected section with AI...');
}

function selectPlatform(platform) {
    projectData.platform = platform;
    // Update UI to show selection
}

function checkDomain() {
    const domain = document.getElementById('custom-domain').value;
    const status = document.getElementById('domain-status');
    if (domain) {
        status.innerHTML = '<span style="color: #10b981;">\u2713 ' + domain + ' is available! $12/year</span>';
    }
}

async function deployApp() {
    const deployStatus = document.getElementById('deploy-status');
    const deployText = document.getElementById('deploy-text');
    const deployBtn = document.getElementById('deploy-btn');
    
    deployStatus.style.display = 'block';
    deployBtn.disabled = true;
    deployBtn.style.opacity = '0.5';
    
    const steps = [
        'Pushing code to GitHub...',
        'Building Docker container...',
        'Deploying to Railway...',
        'Configuring SSL certificate...',
        'Setting up domain...',
        'Running health checks...'
    ];
    
    for (const step of steps) {
        deployText.textContent = step;
        await new Promise(r => setTimeout(r, 1200));
    }
    
    // Update stored project to deployed status
    var allProjects = loadProjects();
    allProjects = allProjects.map(function(p) {
        if (p.id === projectData.id) p.status = 'deployed';
        return p;
    });
    localStorage.setItem(PROJECTS_STORAGE_KEY, JSON.stringify(allProjects));

    // Update live URL and go to final step
    var appName = (projectData.slug || projectData.name.toLowerCase().replace(/\s+/g, '-'));
    document.getElementById('live-url').textContent = 'https://' + appName + '.up.railway.app';
    document.getElementById('live-url').href = 'https://' + appName + '.up.railway.app';
    goToStep(5);
}

// Initialize Lucide icons
if (typeof lucide !== 'undefined') {
    lucide.createIcons();
}
</script>
{% endblock %}
