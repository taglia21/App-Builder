[mypy]
# Global settings
python_version = 3.12
warn_return_any = True
warn_unused_configs = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_unreachable = True
show_error_codes = True
show_column_numbers = True
pretty = True

# Strictness settings (relaxed for gradual adoption)
strict = False
ignore_missing_imports = True
no_strict_optional = True
allow_untyped_defs = True
allow_untyped_calls = True

# Check untyped defs in specific modules as we improve coverage
check_untyped_defs = False

# Exclude generated and test files from strict checking
exclude = (?x)(
    ^output/
    | ^htmlcov/
    | ^\.git/
    | ^\.venv/
    | ^venv/
    | ^__pycache__/
    | ^\.pytest_cache/
    | ^alembic/versions/
  )

# Per-module overrides for stricter checking on core modules
[mypy-src.agents.*]
warn_return_any = True
disallow_untyped_defs = False

[mypy-src.auth.*]
warn_return_any = True

[mypy-src.database.*]
warn_return_any = True

[mypy-src.payments.*]
warn_return_any = True

# Ignore missing stubs for third-party libraries
[mypy-stripe.*]
ignore_missing_imports = True

[mypy-github.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-jinja2.*]
ignore_missing_imports = True

[mypy-loguru.*]
ignore_missing_imports = True

[mypy-sentry_sdk.*]
ignore_missing_imports = True

[mypy-httpx.*]
ignore_missing_imports = True

[mypy-openai.*]
ignore_missing_imports = True

[mypy-anthropic.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-starlette.*]
ignore_missing_imports = True

[mypy-sqlalchemy.*]
ignore_missing_imports = True

[mypy-alembic.*]
ignore_missing_imports = True

[mypy-passlib.*]
ignore_missing_imports = True

[mypy-jose.*]
ignore_missing_imports = True

[mypy-asyncpg.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-pytest.*]
ignore_missing_imports = True
